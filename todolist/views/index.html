<!doctype html>
<html ng-app="myApp">

<head>
    <title>User Login and Sessions</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css" />
    <script src="http://code.angularjs.org/1.2.9/angular.min.js"></script>
    <script src="/javascripts/my_app.js"></script>
    <script src="javascripts/jscolor.js"></script>
</head>

<body ng-controller="myController" id="allOfIt">
    <div id="headbar">
        {{user.username}}'s to do list
    </div>
    <div id="list">
        <div ng-repeat="x in user.todolist" class="divRepeat">
            <table>
                <tr>
                    <td class="boxTD">
                        <input class="checkInput" type="checkbox" ng-model="x.status" ng-change="toggleStatus()">
                    </td>
                    <td class="contentTD">
                        <span ng-show="x.status"><span class="title"><input disabled value="{{x.title}}" ng-model="x.title" ng-blur="updateColor()" style="border-style: none; background-color: rgba(0,0,0,0); font-size: inherit; width: 100%; text-decoration: line-through"></span><br>
                        <span class="details" ng-hide="!x.details"><input disabled value="{{x.details}}" ng-model="x.details" ng-blur="updateColor()" style="border-style: none; background-color: rgba(0,0,0,0); font-size: inherit; width: 100%; text-decoration: line-through"></span></span>
                        <span ng-show="!x.status"><span class="title"><input value="{{x.title}}" ng-model="x.title" ng-blur="updateColor()" style="border-style: none; background-color: rgba(0,0,0,0); font-size: inherit; width: 100%"></span><br>
                        <span class="details" ng-hide="!x.details"><input value="{{x.details}}" ng-model="x.details" ng-blur="updateColor()" style="border-style: none; background-color: rgba(0,0,0,0); font-size: inherit; width: 100%"></span></span>
                    </td>
                    <td class="trashTD">
                        <img src="https://image.flaticon.com/icons/svg/65/65307.svg" class="trashCan" ng-click="deleteItem($index)">
                    </td>
                </tr>
            </table>
            <hr>
        </div>
        <form method="POST" action="/user/addtodo" id="newTaskForm">
            <input type="text" id="taskTitle" name="taskTitle" placeholder="new task"><br><br>
            <input type="text" id="taskDetails" name="taskDetails" placeholder="details"><br><br>
            <input type="submit" id="submit" value="Submit">
        </form>
    </div>
    <hr>
    Change background color: <input class="jscolor" ng-model="user.color" id="color" name="color" ng-change="updateColor()" style="width: 100px">
    <a id="logoutLink" href="/logout"><input type="button" id="logout" value="Logout"></a>
    </span>
    <hr>
    <div>
        To delete, type "delete" in the field and press "Delete User"<br><br>
        <input type="text" ng-keyup="deleteUser()" ng-model="deleteTest"><br><br>
        <form method="POST" action="/user/delete">
            <input type="submit" id="delete" value="Delete User" disabled>
        </form>
    </div>
</body>

</html>
